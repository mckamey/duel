var duel=function(p){function x(a){this.value=a}function k(a){switch(typeof a){case "object":return!a?0:a instanceof Array?2:a instanceof x?5:a instanceof Date?4:3;case "function":return 1;case "undefined":return 0;default:return 4}}function o(a){return typeof a==="function"}function m(){this.value=m.FAST?"":[]}function u(a){return a<10?"0"+a:a}function y(a){var b,c;switch(k(a)){case 4:if(a instanceof Date)return a.getUTCFullYear()+"-"+u(a.getUTCMonth()+1)+"-"+u(a.getUTCDate())+" "+u(a.getUTCHours())+
":"+u(a.getUTCMinutes())+":"+u(a.getUTCSeconds())+" Z";return""+a;case 0:return"";case 2:b=new m;for(var f=0,d=a.length;f<d;f++){if(c)b.append(", ");else c=true;b.append(y(a[f]))}return b.toString();case 3:b=new m;b.append("{");for(f in a)if(a.hasOwnProperty(f)){if(c)b.append(", ");else c=true;b.append(f,"=",y(a[f]))}b.append("}");return b.toString()}return a}function v(a){if(k(a)!==2)a=["",a];this.value=a}function r(a,b){switch(k(b)){case 2:if(b[0]==="")for(var c=1,f=b.length;c<f;c++)r(a,b[c]);else a.push(b);
break;case 3:c=a[1];if(k(c)===3)for(f in b){if(b.hasOwnProperty(f))c[f]=b[f]}else a.splice(1,0,b);break;case 4:c=a.length-1;if(c>0&&k(a[c])===4)a[c]=""+a[c]+b;else b!==""&&a.push(""+b);break;case 0:break;default:a.push(b)}}function q(a,b,c,f,d,e){var g=k(a[1])===3;if(a.length===(g?3:2))return l(a[a.length-1],b,c,f,d,e);var h=[""];g=g?2:1;for(var j=a.length;g<j;g++)r(h,l(a[g],b,c,f,d,e));return h}function C(a,b,c,f,d,e){for(var g=1,h=a.length;g<h;g++){var j=a[g],i=j[1].test;if(k(j[1])===3&&i){if(o(i))i=
i(b,c,f,d);if(!i)continue}return q(j,b,c,f,d,e)}return null}function J(a){if(k(a)!==2)a=["",a];var b=function(c){try{var f=l(a,c,0,1,null);return new v(f)}catch(d){return new v("["+d+"]")}};b.getView=function(){return a};return b}function K(a){if(typeof a!=="string")return a;return a.replace(/[&<>]/g,function(b){switch(b){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";default:return b}})}function L(a){if(typeof a!=="string")return a;return a.replace(/[&<>"]/g,function(b){switch(b){case "&":return"&amp;";
case "<":return"&lt;";case ">":return"&gt;";case '"':return"&quot;";default:return b}})}function D(a,b){var c=b[0]||"",f=b.length,d=1,e;if(c.charAt(0)==="!")b[0]==="!doctype"?a.append("<!doctype ",b[1],">"):a.append("<!--",b[1],"--\>");else{if(c){a.append("<",c);e=b[d];if(k(e)===3){for(var g in e)if(e.hasOwnProperty(g)){a.append(" ",g);var h=e[g];k(h)!==0&&a.append('="',L(h),'"')}d++}a.append(">")}for(;d<f;d++){e=b[d];k(e)===2?D(a,e):a.append(K(e))}c&&!M[c]&&a.append("</",c,">")}}function s(a){if(a){if(a.charAt(0)===
"!")return n.createComment(a==="!"?"":a.substr(1)+" ")}else{if(n.createDocumentFragment)return n.createDocumentFragment();a=""}if(a.toLowerCase()==="style"&&n.createStyleSheet)return n.createStyleSheet();return n.createElement(a)}function w(a,b){if(b){var c=(a.tagName||"").toLowerCase();if(a.nodeType===8){if(b.nodeType===3)a.nodeValue+=b.nodeValue}else if(c==="table"&&a.tBodies)if(b.tagName)if((c=b.tagName.toLowerCase())&&c!=="tbody"&&c!=="thead"){var f=a.tBodies.length>0?a.tBodies[a.tBodies.length-
1]:null;if(!f){f=s(c==="th"?"thead":"tbody");a.appendChild(f)}f.appendChild(b)}else a.canHaveChildren!==false&&a.appendChild(b);else{if(b.nodeType===11)for(;b.firstChild;)w(a,b.removeChild(b.firstChild))}else if(c==="style"&&n.createStyleSheet)a.cssText=b;else if(a.canHaveChildren!==false)a.appendChild(b);else if(c==="object"&&b.tagName&&b.tagName.toLowerCase()==="param"){try{a.appendChild(b)}catch(d){}try{if(a.object)a.object[b.name]=b.value}catch(e){}}}}function E(a,b,c){if(typeof c==="string")c=
new Function("event",c);if(o(c))a[b]=c}function F(a){return!!a&&a.nodeType===3&&(!a.nodeValue||!/\S/.exec(a.nodeValue))}function G(a,b){if(a&&a.nodeType===3&&b.exec(a.nodeValue))a.nodeValue=a.nodeValue.replace(b,"")}function z(a){if(a){for(;F(a.firstChild);)a.removeChild(a.firstChild);for(G(a.firstChild,N);F(a.lastChild);)a.removeChild(a.lastChild);G(a.lastChild,O)}}function H(a,b){var c=a[b];if(c){try{delete a[b]}catch(f){a[b]=undefined}if(!o(c))try{c=new Function(""+c)}catch(d){c=null}}return c}
function I(a){if(a){var b=H(a,"$init");b&&b.call(a);if(b=H(a,"$load"))setTimeout(function(){b.call(a);b=a=null},0);else b=a=null}}function A(a,b){for(var c=1,f=b.length;c<f;c++){var d=b[c];switch(k(d)){case 2:var e=d[0];d=A(s(e),d);if(e==="html"){z(d);I(d);return d}w(a,d);break;case 4:d!==""&&w(a,n.createTextNode(""+d));break;case 3:if(a.nodeType===1){e=a;var g=d;if(g.name&&n.attachEvent)try{var h=s("<"+e.tagName+" name='"+g.name+"'>");if(e.tagName===h.tagName)e=h}catch(j){}d=void 0;for(d in g)if(g.hasOwnProperty(d)){var i=
g[d],B=k(i);if(d){if(B===0){i="";B=4}d=P[d.toLowerCase()]||d;if(d==="style")if(typeof e.style.cssText!=="undefined")e.style.cssText=i;else e.style=i;else if(d==="class")e.className=i;else if(Q[d]){E(e,d,i);t[d]&&E(e,t[d],i)}else if(B===4){e.setAttribute(d,i);t[d]&&e.setAttribute(t[d],i)}else{e[d]=i;if(t[d])e[t[d]]=i}}}a=e}break;case 5:e=w;g=a;i=d;d=s("div");d.innerHTML=""+i;z(d);if(d.childNodes.length===1)d=d.firstChild;else{for(i=s("");d.firstChild;)i.appendChild(d.firstChild);d=i}e(g,d)}}z(a);I(a);
if(a.nodeType===11&&a.childNodes.length===1)a=a.firstChild;return a}var n=p.document;x.prototype.toString=function(){return this.value};m.FAST=!p.ScriptEngineMajorVersion;m.prototype.append=function(a,b,c){if(m.FAST){this.value+=a;if(b!=null){this.value+=b;if(c!=null)this.value+=c}}else this.value.push.apply(this.value,arguments)};m.prototype.clear=function(){this.value=m.FAST?"":[]};m.prototype.toString=function(){return m.FAST?this.value:this.value.join("")};var l;l=function(a,b,c,f,d,e){switch(k(a)){case 1:return y(a(b,
c,f,d));case 2:var g=a[0]||"";switch(g){case "$for":a:{var h=a[1]||{};g=[""];var j;if(h.hasOwnProperty("count")){j=h.count;if(o(j))j=j(b,c,f,d);if(h.hasOwnProperty("data")){h=h.data;if(o(h))h=h(b,c,f,d)}else h=b;for(b=0;b<j;b++)r(g,q(a,h,b,j,null,e))}else{if(h.hasOwnProperty("in")){var i=h["in"];if(o(i))i=i(b,c,f,d);if(k(i)===3){h=[];for(j in i)i.hasOwnProperty(j)&&h.push(j);b=0;for(j=h.length;b<j;b++)r(g,q(a,i[h[b]],b,j,h[b],e));a=g;break a}h=i}else{h=h.each;if(o(h))h=h(b,c,f,d)}b=k(h);if(b===2){b=
0;for(j=h.length;b<j;b++)r(g,q(a,h[b],b,j,null,e))}else if(b!==0)g=q(a,h,0,1,null,e)}a=g}return a;case "$xor":return C(a,b,c,f,d,e);case "$if":return C(["$xor",a],b,c,f,d,e);case "$call":e=a[1]||{};if(e.view){g=l(e.view,b,c,f,d);h=e.hasOwnProperty("data")?l(e.data,b,c,f,d):b;j=e.hasOwnProperty("index")?l(e.index,b,c,f,d):c;i=e.hasOwnProperty("count")?l(e.count,b,c,f,d):f;b=e.hasOwnProperty("key")?l(e.key,b,c,f,d):d;c={};for(f=a.length-1;f>=2;f--){d=a[f];e=d[1]||{};if(e.hasOwnProperty("name"))c[e.name]=
d}a=g&&o(g.getView)?l(g.getView(),h,j,i,b,c):null}else a=null;return a;case "$part":g=(a[1]||{}).name||"";g=e&&e.hasOwnProperty(g)?e[g]:a;return q(g,b,c,f,d)}g=[g];h=1;for(j=a.length;h<j;h++)r(g,l(a[h],b,c,f,d,e));return g;case 3:e={};for(g in a)if(a.hasOwnProperty(g))e[g]=l(a[g],b,c,f,d);return e}return a};p=p.duel=function(a){return o(a)&&o(a.getView)?a:J(a)};p.raw=p.raw=function(a){return new x(a)};var M={area:true,base:true,basefont:true,br:true,col:true,frame:true,hr:true,img:true,input:true,
isindex:true,keygen:true,link:true,meta:true,param:true,source:true,wbr:true};v.prototype.toString=function(){var a;var b=this.value;try{var c=new m;D(c,b);a=c.toString()}catch(f){a="["+f+"]"}return a};var P={rowspan:"rowSpan",colspan:"colSpan",cellpadding:"cellPadding",cellspacing:"cellSpacing",tabindex:"tabIndex",accesskey:"accessKey",hidefocus:"hideFocus",usemap:"useMap",maxlength:"maxLength",readonly:"readOnly",contenteditable:"contentEditable"},t={enctype:"encoding",onscroll:"DOMMouseScroll"},
Q={onblur:true,onchange:true,onclick:true,ondblclick:true,onerror:true,onfocus:true,onkeydown:true,onkeypress:true,onkeyup:true,onload:true,onmousedown:true,onmouseenter:true,onmouseleave:true,onmousemove:true,onmouseout:true,onmouseover:true,onmouseup:true,onresize:true,onscroll:true,onselect:true,onsubmit:true,onunload:true},N=/^[\r\n]+/,O=/[\r\n]+$/;p.attr=p.attr=function(a,b,c,f,d,e){if(k(a)===4)a=n.getElementById(a);a&&A(a,q(["",b],c,f,d,e))};v.prototype.toDOM=v.prototype.toDOM=function(){try{return A(s(this.value[0]),
this.value)}catch(a){return n.createTextNode("["+a+"]")}};return p}(window);