(function(v){function w(a){this.value=a}function k(a){switch(typeof a){case "object":return!a?0:a instanceof Array?2:a instanceof w?5:3;case "function":return 1;case "undefined":return 0;default:return 4}}function m(a){return typeof a==="function"}function t(a){if(k(a)!==2)a=["",a];this.value=a}function p(a,b){switch(k(b)){case 2:if(b[0]==="")for(var d=1,c=b.length;d<c;d++)p(a,b[d]);else a.push(b);break;case 3:d=a[1];if(k(d)===3)for(c in b){if(b.hasOwnProperty(c))d[c]=b[c]}else a.splice(1,0,b);break;
case 4:d=a.length-1;if(d>0&&k(a[d])===4)a[d]=""+a[d]+b;else a.push(""+b);break;case 0:break;default:a.push(b)}}function q(a,b,d,c,f,h){var e=k(a[1])===3;if(a.length===(e?3:2))return l(a[a.length-1],b,d,c,f,h);var g=[""];e=e?2:1;for(var i=a.length;e<i;e++)p(g,l(a[e],b,d,c,f,h));return g}function x(a,b,d,c,f,h){for(var e=1,g=a.length;e<g;e++){var i=a[e],j=i[1].test;if(k(i[1])===3&&j){if(m(j))j=j(b,d,c,f);if(!j)continue}return q(i,b,d,c,f,h)}return null}function G(a){if(k(a)!==2)a=["",a];var b=function(d){try{var c=
l(a,d,0,1,null);return new t(c)}catch(f){return new t("["+f+"]")}};b.getView=function(){return a};return b}function o(){this.value=o.FAST?"":[]}function H(a){if(typeof a!=="string")return a;return a.replace(/[&<>]/g,function(b){switch(b){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";default:return b}})}function I(a){if(typeof a!=="string")return a;return a.replace(/[&<>"]/g,function(b){switch(b){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case '"':return"&quot;";
default:return b}})}function y(a,b){var d=b[0]||"",c=b.length,f=1,h;if(d.charAt(0)==="!")b[0]==="!doctype"?a.append("<!doctype ",b[1],">"):a.append("<!--",b[1],"--\>");else{if(d){a.append("<",d);h=b[f];if(k(h)===3){for(var e in h)if(h.hasOwnProperty(e)){a.append(" ",e);var g=h[e];k(g)!==0&&a.append('="',I(g),'"')}f++}a.append(">")}for(;f<c;f++){h=b[f];k(h)===2?y(a,h):a.append(H(h))}d&&!J[d]&&a.append("</",d,">")}}function r(a){if(a){if(a.charAt(0)==="!")return n.createComment(a==="!"?"":a.substr(1)+
" ")}else{if(n.createDocumentFragment)return n.createDocumentFragment();a=""}if(a.toLowerCase()==="style"&&n.createStyleSheet)return n.createStyleSheet();return n.createElement(a)}function u(a,b){if(b){var d=(a.tagName||"").toLowerCase();if(a.nodeType===8){if(b.nodeType===3)a.nodeValue+=b.nodeValue}else if(d==="table"&&a.tBodies)if(b.tagName)if((d=b.tagName.toLowerCase())&&d!=="tbody"&&d!=="thead"){var c=a.tBodies.length>0?a.tBodies[a.tBodies.length-1]:null;if(!c){c=r(d==="th"?"thead":"tbody");a.appendChild(c)}c.appendChild(b)}else a.canHaveChildren!==
false&&a.appendChild(b);else{if(b.nodeType===11)for(;b.firstChild;)u(a,b.removeChild(b.firstChild))}else if(d==="style"&&n.createStyleSheet)a.cssText=b;else if(a.canHaveChildren!==false)a.appendChild(b);else if(d==="object"&&b.tagName&&b.tagName.toLowerCase()==="param"){try{a.appendChild(b)}catch(f){}try{if(a.object)a.object[b.name]=b.value}catch(h){}}}}function z(a,b,d){if(typeof d==="string")d=new Function("event",d);if(m(d))a[b]=d}function A(a){return!!a&&a.nodeType===3&&(!a.nodeValue||!/\S/.exec(a.nodeValue))}
function B(a){if(a){for(;A(a.firstChild);)a.removeChild(a.firstChild);for(;A(a.lastChild);)a.removeChild(a.lastChild)}}function C(a,b){var d=a[b];if(d){try{delete a[b]}catch(c){a[b]=undefined}if(!m(d))try{d=new Function(""+d)}catch(f){d=null}}return d}function K(a){if(a){var b=C(a,"$init");b&&b.call(a);if(b=C(a,"$load"))setTimeout(function(){b.call(a);b=a=null},0);else b=a=null}}function D(a,b){for(var d=1;d<b.length;d++){var c=b[d];switch(k(c)){case 2:u(a,D(r(c[0]),c));break;case 4:u(a,n.createTextNode(""+
c));break;case 3:if(a.nodeType===1){var f=a,h=c;if(h.name&&n.attachEvent)try{var e=r("<"+f.tagName+" name='"+h.name+"'>");if(f.tagName===e.tagName)f=e}catch(g){}c=void 0;for(c in h)if(h.hasOwnProperty(c)){var i=h[c],j=k(i);if(c){if(j===0){i="";j=4}c=L[c.toLowerCase()]||c;if(c==="style")if(typeof f.style.cssText!=="undefined")f.style.cssText=i;else f.style=i;else if(c==="class")f.className=i;else if(M[c]){z(f,c,i);s[c]&&z(f,s[c],i)}else if(j===4){f.setAttribute(c,i);s[c]&&f.setAttribute(s[c],i)}else{f[c]=
i;if(s[c])f[s[c]]=i}}}a=f}break;case 5:f=u;h=a;i=c;c=r("div");c.innerHTML=""+i;B(c);if(c.childNodes.length===1)c=c.firstChild;else{for(i=r("");c.firstChild;)i.appendChild(c.firstChild);c=i}f(h,c)}}B(a);K(a);if(a.nodeType===11&&a.childNodes.length===1)a=a.firstChild;return a}var n=v.document;w.prototype.toString=function(){return this.value};var l;l=function(a,b,d,c,f,h){var e;switch(k(a)){case 1:e=a(b,d,c,f);break;case 2:e=a[0]||"";switch(e){case "$for":a:{var g=a[1]||{};e=[""];var i;if(g.hasOwnProperty("count")){i=
g.count;if(m(i))i=i(b,d,c,f);if(g.hasOwnProperty("data")){g=g.data;if(m(g))g=g(b,d,c,f)}else g=b;for(b=0;b<i;b++)p(e,q(a,g,b,i,null,h))}else{if(g.hasOwnProperty("in")){var j=g["in"];if(m(j))j=j(b,d,c,f);if(k(j)===3){g=[];for(i in j)j.hasOwnProperty(i)&&g.push(i);b=0;for(i=g.length;b<i;b++)p(e,q(a,j[g[b]],b,i,g[b],h));e=e;break a}g=j}else{g=g.each;if(m(g))g=g(b,d,c,f)}b=k(g);if(b===2){b=0;for(i=g.length;b<i;b++)p(e,q(a,g[b],b,i,null,h))}else if(b!==0)e=q(a,g,0,1,null,h)}e=e}break;case "$xor":e=x(a,
b,d,c,f,h);break;case "$if":e=x(["$xor",a],b,d,c,f,h);break;case "$call":h=a[1];if(!h||!h.view)e=null;else{e=l(h.view,b,d,c,f);g=l(h.data,b,d,c,f);i=l(h.index,b,d,c,f);j=l(h.count,b,d,c,f);b=l(h.key,b,d,c,f);d={};c=2;for(f=a.length;c<f;c++){var E=a[c];if((h=E[1]||{})&&h.name)d[h.name]=E}e=e&&m(e.getView)?l(e.getView(),g,i,j,b,d):null}break;case "$part":e=(a[1]||{}).name;e=!h||!h[e]?a:h[e];e=q(e,b,d,c,f);break;default:e=[e];g=1;for(i=a.length;g<i;g++)p(e,l(a[g],b,d,c,f,h))}break;case 3:e={};for(g in a)if(a.hasOwnProperty(g))e[g]=
l(a[g],b,d,c,f);break;default:e=a}return e};var F=v.duel=function(a){return m(a)&&m(a.getView)?a:G(a)};F.raw=F.raw=function(a){return new w(a)};var J={area:true,base:true,basefont:true,br:true,col:true,frame:true,hr:true,img:true,input:true,isindex:true,keygen:true,link:true,meta:true,param:true,source:true,wbr:true};o.FAST=!v.ScriptEngineMajorVersion;o.prototype.append=function(a,b,d){if(o.FAST){this.value+=a;if(b!=null){this.value+=b;if(d!=null)this.value+=d}}else this.value.push.apply(this.value,
arguments)};o.prototype.clear=function(){this.value=o.FAST?"":[]};o.prototype.toString=function(){return o.FAST?this.value:this.value.join("")};t.prototype.toString=function(){var a;var b=this.value;try{var d=new o;y(d,b);a=d.toString()}catch(c){a="["+c+"]"}return a};var L={rowspan:"rowSpan",colspan:"colSpan",cellpadding:"cellPadding",cellspacing:"cellSpacing",tabindex:"tabIndex",accesskey:"accessKey",hidefocus:"hideFocus",usemap:"useMap",maxlength:"maxLength",readonly:"readOnly",contenteditable:"contentEditable"},
s={enctype:"encoding",onscroll:"DOMMouseScroll"},M={onblur:true,onchange:true,onclick:true,ondblclick:true,onerror:true,onfocus:true,onkeydown:true,onkeypress:true,onkeyup:true,onload:true,onmousedown:true,onmouseenter:true,onmouseleave:true,onmousemove:true,onmouseout:true,onmouseover:true,onmouseup:true,onresize:true,onscroll:true,onselect:true,onsubmit:true,onunload:true};t.prototype.toDOM=t.prototype.toDOM=function(){try{return D(r(this.value[0]),this.value)}catch(a){return n.createTextNode("["+
a+"]")}}})(window);