var duel=function(p){function x(a){this.value=a}function j(a){switch(typeof a){case "object":return!a?0:a instanceof Array?2:a instanceof x?5:a instanceof Date?4:3;case "function":return 1;case "undefined":return 0;default:return 4}}function o(a){return typeof a==="function"}function m(){this.value=m.FAST?"":[]}function u(a){return a<10?"0"+a:a}function y(a){var b,c;switch(j(a)){case 4:if(a instanceof Date)return a.getUTCFullYear()+"-"+u(a.getUTCMonth()+1)+"-"+u(a.getUTCDate())+" "+u(a.getUTCHours())+
":"+u(a.getUTCMinutes())+":"+u(a.getUTCSeconds())+" Z";return""+a;case 0:return"";case 2:b=new m;for(var e=0,d=a.length;e<d;e++){if(c)b.append(", ");else c=true;b.append(y(a[e]))}return b.toString();case 3:b=new m;b.append("{");for(e in a)if(a.hasOwnProperty(e)){if(c)b.append(", ");else c=true;b.append(e,"=",y(a[e]))}b.append("}");return b.toString()}return a}function v(a){if(j(a)!==2)a=["",a];this.value=a}function q(a,b){switch(j(b)){case 2:if(b[0]==="")for(var c=1,e=b.length;c<e;c++)q(a,b[c]);else a.push(b);
break;case 3:c=a[1];if(j(c)===3)for(e in b){if(b.hasOwnProperty(e))c[e]=b[e]}else a.splice(1,0,b);break;case 4:c=a.length-1;if(c>0&&j(a[c])===4)a[c]=""+a[c]+b;else b!==""&&a.push(""+b);break;case 0:break;default:a.push(b)}}function r(a,b,c,e,d,f){var h=j(a[1])===3;if(a.length===(h?3:2))return l(a[a.length-1],b,c,e,d,f);var g=[""];h=h?2:1;for(var i=a.length;h<i;h++)q(g,l(a[h],b,c,e,d,f));return g}function A(a,b,c,e,d,f){for(var h=1,g=a.length;h<g;h++){var i=a[h],k=i[1].test;if(j(i[1])===3&&k){if(o(k))k=
k(b,c,e,d);if(!k)continue}return r(i,b,c,e,d,f)}return null}function J(a){if(j(a)!==2)a=["",a];var b=function(c){try{var e=l(a,c,0,1,null);return new v(e)}catch(d){return new v("["+d+"]")}};b.getView=function(){return a};return b}function K(a){if(typeof a!=="string")return a;return a.replace(/[&<>]/g,function(b){switch(b){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";default:return b}})}function L(a){if(typeof a!=="string")return a;return a.replace(/[&<>"]/g,function(b){switch(b){case "&":return"&amp;";
case "<":return"&lt;";case ">":return"&gt;";case '"':return"&quot;";default:return b}})}function B(a,b){var c=b[0]||"",e=b.length,d=1,f;if(c.charAt(0)==="!")b[0]==="!doctype"?a.append("<!doctype ",b[1],">"):a.append("<!--",b[1],"--\>");else{if(c){a.append("<",c);f=b[d];if(j(f)===3){for(var h in f)if(f.hasOwnProperty(h)){a.append(" ",h);var g=f[h];j(g)!==0&&a.append('="',L(g),'"')}d++}a.append(">")}for(;d<e;d++){f=b[d];j(f)===2?B(a,f):a.append(K(f))}c&&!M[c]&&a.append("</",c,">")}}function s(a){if(a){if(a.charAt(0)===
"!")return n.createComment(a==="!"?"":a.substr(1)+" ")}else{if(n.createDocumentFragment)return n.createDocumentFragment();a=""}if(a.toLowerCase()==="style"&&n.createStyleSheet)return n.createStyleSheet();return n.createElement(a)}function w(a,b){if(b){var c=(a.tagName||"").toLowerCase();if(a.nodeType===8){if(b.nodeType===3)a.nodeValue+=b.nodeValue}else if(c==="table"&&a.tBodies)if(b.tagName)if((c=b.tagName.toLowerCase())&&c!=="tbody"&&c!=="thead"){var e=a.tBodies.length>0?a.tBodies[a.tBodies.length-
1]:null;if(!e){e=s(c==="th"?"thead":"tbody");a.appendChild(e)}e.appendChild(b)}else a.canHaveChildren!==false&&a.appendChild(b);else{if(b.nodeType===11)for(;b.firstChild;)w(a,b.removeChild(b.firstChild))}else if(c==="style"&&n.createStyleSheet)a.cssText=b;else if(a.canHaveChildren!==false)a.appendChild(b);else if(c==="object"&&b.tagName&&b.tagName.toLowerCase()==="param"){try{a.appendChild(b)}catch(d){}try{if(a.object)a.object[b.name]=b.value}catch(f){}}}}function C(a,b,c){if(typeof c==="string")c=
new Function("event",c);if(o(c))a[b]=c}function D(a,b){if(b.name&&n.attachEvent&&!a.parentNode)try{var c=s("<"+a.tagName+" name='"+b.name+"'>");if(a.tagName===c.tagName)a=c}catch(e){}for(var d in b)if(b.hasOwnProperty(d)){c=b[d];var f=j(c);if(d){if(f===0){c="";f=4}d=N[d.toLowerCase()]||d;if(d==="style")if(typeof a.style.cssText!=="undefined")a.style.cssText=c;else a.style=c;else if(d==="class")a.className=c;else if(O[d]){C(a,d,c);t[d]&&C(a,t[d],c)}else if(f===4){a.setAttribute(d,c);t[d]&&a.setAttribute(t[d],
c)}else{a[d]=c;if(t[d])a[t[d]]=c}}}return a}function E(a){return!!a&&a.nodeType===3&&(!a.nodeValue||!/\S/.exec(a.nodeValue))}function F(a,b){if(a&&a.nodeType===3&&b.exec(a.nodeValue))a.nodeValue=a.nodeValue.replace(b,"")}function z(a){if(a){for(;E(a.firstChild);)a.removeChild(a.firstChild);for(F(a.firstChild,P);E(a.lastChild);)a.removeChild(a.lastChild);F(a.lastChild,Q)}}function G(a,b){var c=a[b];if(c){try{delete a[b]}catch(e){a[b]=undefined}if(!o(c))try{c=new Function(""+c)}catch(d){c=null}}return c}
function H(a){if(a){var b=G(a,"$init");b&&b.call(a);if(b=G(a,"$load"))setTimeout(function(){b.call(a);b=a=null},0);else b=a=null}}function I(a,b){for(var c=1,e=b.length;c<e;c++){var d=b[c];switch(j(d)){case 2:var f=d[0];d=I(s(f),d);if(f==="html"){z(d);H(d);return d}w(a,d);break;case 4:d!==""&&w(a,n.createTextNode(""+d));break;case 3:if(a.nodeType===1)a=D(a,d);break;case 5:f=w;var h=a;var g=d;d=s("div");d.innerHTML=""+g;z(d);if(d.childNodes.length===1)d=d.firstChild;else{for(g=s("");d.firstChild;)g.appendChild(d.firstChild);
d=g}f(h,d)}}z(a);H(a);if(a.nodeType===11&&a.childNodes.length===1)a=a.firstChild;return a}var n=p.document;x.prototype.toString=function(){return this.value};m.FAST=!p.ScriptEngineMajorVersion;m.prototype.append=function(a,b,c){if(m.FAST){this.value+=a;if(b!=null){this.value+=b;if(c!=null)this.value+=c}}else this.value.push.apply(this.value,arguments)};m.prototype.clear=function(){this.value=m.FAST?"":[]};m.prototype.toString=function(){return m.FAST?this.value:this.value.join("")};var l;l=function(a,
b,c,e,d,f){switch(j(a)){case 1:return y(a(b,c,e,d));case 2:var h=a[0]||"";switch(h){case "$for":a:{var g=a[1]||{};h=[""];var i;if(g.hasOwnProperty("count")){i=g.count;if(o(i))i=i(b,c,e,d);if(g.hasOwnProperty("data")){g=g.data;if(o(g))g=g(b,c,e,d)}else g=b;for(b=0;b<i;b++)q(h,r(a,g,b,i,null,f))}else{if(g.hasOwnProperty("in")){var k=g["in"];if(o(k))k=k(b,c,e,d);if(j(k)===3){g=[];for(i in k)k.hasOwnProperty(i)&&g.push(i);b=0;for(i=g.length;b<i;b++)q(h,r(a,k[g[b]],b,i,g[b],f));a=h;break a}g=k}else{g=
g.each;if(o(g))g=g(b,c,e,d)}b=j(g);if(b===2){b=0;for(i=g.length;b<i;b++)q(h,r(a,g[b],b,i,null,f))}else if(b!==0)h=r(a,g,0,1,null,f)}a=h}return a;case "$xor":return A(a,b,c,e,d,f);case "$if":return A(["$xor",a],b,c,e,d,f);case "$call":f=a[1]||{};if(f.view){h=l(f.view,b,c,e,d);g=f.hasOwnProperty("data")?l(f.data,b,c,e,d):b;i=f.hasOwnProperty("index")?l(f.index,b,c,e,d):c;k=f.hasOwnProperty("count")?l(f.count,b,c,e,d):e;b=f.hasOwnProperty("key")?l(f.key,b,c,e,d):d;c={};for(e=a.length-1;e>=2;e--){d=a[e];
f=d[1]||{};if(f.hasOwnProperty("name"))c[f.name]=d}a=h&&o(h.getView)?l(h.getView(),g,i,k,b,c):null}else a=null;return a;case "$part":h=(a[1]||{}).name||"";h=f&&f.hasOwnProperty(h)?f[h]:a;return r(h,b,c,e,d)}h=[h];g=1;for(i=a.length;g<i;g++)q(h,l(a[g],b,c,e,d,f));return h;case 3:f={};for(h in a)if(a.hasOwnProperty(h))f[h]=l(a[h],b,c,e,d);return f}return a};p=p.duel=function(a){return o(a)&&o(a.getView)?a:J(a)};p.raw=p.raw=function(a){return new x(a)};var M={area:true,base:true,basefont:true,br:true,
col:true,frame:true,hr:true,img:true,input:true,isindex:true,keygen:true,link:true,meta:true,param:true,source:true,wbr:true};v.prototype.toString=function(){var a;var b=this.value;try{var c=new m;B(c,b);a=c.toString()}catch(e){a="["+e+"]"}return a};var N={rowspan:"rowSpan",colspan:"colSpan",cellpadding:"cellPadding",cellspacing:"cellSpacing",tabindex:"tabIndex",accesskey:"accessKey",hidefocus:"hideFocus",usemap:"useMap",maxlength:"maxLength",readonly:"readOnly",contenteditable:"contentEditable"},
t={enctype:"encoding",onscroll:"DOMMouseScroll"},O={onblur:true,onchange:true,onclick:true,ondblclick:true,onerror:true,onfocus:true,onkeydown:true,onkeypress:true,onkeyup:true,onload:true,onmousedown:true,onmouseenter:true,onmouseleave:true,onmousemove:true,onmouseout:true,onmouseover:true,onmouseup:true,onresize:true,onscroll:true,onselect:true,onsubmit:true,onunload:true},P=/^[\r\n]+/,Q=/[\r\n]+$/;p.attr=p.attr=function(a,b,c,e,d,f){if(j(a)===4)a=n.getElementById(a);if(a){b=l(b,c,e,d,f);D(a,b)}};
v.prototype.toDOM=v.prototype.toDOM=function(){try{return I(s(this.value[0]),this.value)}catch(a){return n.createTextNode("["+a+"]")}};return p}(window);